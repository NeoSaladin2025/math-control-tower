<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>통합 관리 규칙 센터</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Apple SD Gothic Neo', sans-serif; background-color: #f1f5f9; user-select: none; }
        .menu-btn { transition: all 0.2s; }
        .menu-btn:hover { background-color: #e2e8f0; transform: translateX(5px); }
        .menu-btn.active { background-color: #4f46e5; color: white; transform: translateX(5px); shadow: lg; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

    <script src="config.js"></script>

    <div class="w-64 bg-white border-r border-slate-200 flex flex-col shadow-xl z-10">
        <div class="p-6 border-b border-slate-100">
            <h1 class="text-xl font-black text-slate-800 flex items-center gap-2">
                <i class="fa-solid fa-sliders text-indigo-600"></i> 통합 관리 센터
            </h1>
            <p class="text-xs text-slate-400 mt-1">시스템의 규칙을 설계하세요.</p>
        </div>
        
        <nav class="flex-1 p-4 space-y-2">
            <button onclick="loadModule('config_daily.html', this)" class="menu-btn active w-full text-left p-3 rounded-xl font-bold flex items-center gap-3 text-slate-600">
                <i class="fa-solid fa-calendar-check w-6 text-center"></i> 데일리 규칙
            </button>
            <button onclick="loadModule('config_level.html', this)" class="menu-btn w-full text-left p-3 rounded-xl font-bold flex items-center gap-3 text-slate-600">
                <i class="fa-solid fa-layer-group w-6 text-center"></i> 레벨/성장 설계
            </button>
            <button onclick="loadModule('config_tier.html', this)" class="menu-btn w-full text-left p-3 rounded-xl font-bold flex items-center gap-3 text-slate-600">
                <i class="fa-solid fa-crown w-6 text-center"></i> 티어/등급 관리
            </button>
        </nav>

        <div class="p-4 border-t border-slate-100">
            <button onclick="location.href='teacher_main.html'" class="w-full py-3 border-2 border-slate-200 rounded-xl text-slate-500 font-bold hover:bg-slate-50 transition">
                나가기
            </button>
        </div>
    </div>

    <div class="flex-1 bg-slate-50 relative">
        <iframe id="content-frame" src="config_daily.html"></iframe>
    </div>

    <script>
        const user = checkAuth();
        if(user && user.role === 'student') { alert("교사 전용입니다."); location.href='index.html'; }

        function loadModule(url, btn) {
            // iframe 주소 변경
            document.getElementById('content-frame').src = url;
            
            // 버튼 스타일 갱신
            document.querySelectorAll('.menu-btn').forEach(b => {
                b.classList.remove('active', 'bg-indigo-600', 'text-white');
                b.classList.add('text-slate-600');
            });
            btn.classList.remove('text-slate-600');
            btn.classList.add('active');
        }
    </script>
</body>
</html>